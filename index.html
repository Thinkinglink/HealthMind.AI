<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0EA5E9">
<title>HealthMind AI</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--primary:#0EA5E9;--secondary:#F43F5E;--tertiary:#14B8A6;--accent:#EC4899;--purple:#A855F7;--green:#10B981;--text-dark:#1E293B;--text-gray:#64748B;--bg-main:#F1F5F9;--bg-card:rgba(255,255,255,.95)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Poppins',sans-serif;background:var(--bg-main);color:var(--text-dark);line-height:1.6;overflow-x:hidden;padding-bottom:80px}.container{max-width:480px;margin:0 auto;padding:24px}#splash{position:fixed;top:0;left:0;width:100%;height:100vh;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;animation:fadeOut .5s 2s forwards}#splash h1{font-size:56px;font-weight:800;background:linear-gradient(135deg,#fff 0%,#E0E7FF 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:16px}#splash p{color:rgba(255,255,255,.9);text-transform:uppercase;letter-spacing:4px;font-size:14px;font-weight:600}@keyframes fadeOut{to{opacity:0;pointer-events:none}}.auth-screen{position:fixed;top:0;left:0;width:100%;min-height:100vh;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);display:none;align-items:center;justify-content:center;padding:24px;z-index:1000}.auth-screen.active{display:flex}.auth-card{background:rgba(255,255,255,.15);backdrop-filter:blur(20px);border-radius:32px;padding:40px 32px;width:100%;max-width:400px;border:1px solid rgba(255,255,255,.3);box-shadow:0 8px 32px rgba(0,0,0,.1)}.auth-card h2{font-size:32px;font-weight:800;color:white;margin-bottom:8px}.auth-card p{color:rgba(255,255,255,.8);margin-bottom:32px}.input-group{margin-bottom:20px}.input-group label{display:block;color:white;font-weight:600;margin-bottom:8px;font-size:14px}.input-group input{width:100%;padding:16px 20px;border-radius:16px;border:2px solid rgba(255,255,255,.3);background:rgba(255,255,255,.1);color:white;font-size:16px;font-family:'Poppins',sans-serif;transition:all .3s}.input-group input::placeholder{color:rgba(255,255,255,.5)}.input-group input:focus{outline:none;border-color:white;background:rgba(255,255,255,.2);box-shadow:0 0 0 4px rgba(255,255,255,.1)}.btn-primary{width:100%;padding:18px;border-radius:16px;border:none;background:linear-gradient(135deg,#fff 0%,#E0E7FF 100%);color:#0EA5E9;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;box-shadow:0 8px 24px rgba(255,255,255,.3);font-family:'Poppins',sans-serif}.btn-primary:active{transform:scale(.98)}.auth-link{text-align:center;margin-top:24px;color:rgba(255,255,255,.8)}.auth-link a{color:white;font-weight:700;text-decoration:none;cursor:pointer}.screen{display:none;min-height:100vh}.screen.active{display:block}.tracking-indicator{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#10B981 0%,#14B8A6 100%);color:white;text-align:center;padding:12px;font-weight:700;z-index:999;animation:pulse 2s infinite;display:none}.tracking-indicator.active{display:block}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}.card{background:var(--bg-card);backdrop-filter:blur(10px);border-radius:24px;padding:24px;margin-bottom:20px;box-shadow:0 4px 24px rgba(0,0,0,.06);border:1px solid rgba(255,255,255,.8);transition:all .3s}.card h3{font-size:20px;font-weight:800;margin-bottom:8px}.welcome-card{background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);color:white;border-radius:24px;padding:32px 24px;margin-bottom:24px}.welcome-card h2{font-size:28px;font-weight:800;margin-bottom:8px}.welcome-card p{opacity:.9;font-size:15px}.progress-rings{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px}.progress-ring{background:white;border-radius:20px;padding:24px;text-align:center;box-shadow:0 4px 24px rgba(0,0,0,.06)}.progress-ring svg{width:120px;height:120px;transform:rotate(-90deg);margin-bottom:12px}.progress-ring circle{fill:none;stroke-width:10}.progress-ring .bg{stroke:#E2E8F0}.progress-ring h4{font-size:16px;font-weight:700;margin-bottom:4px}.progress-ring p{color:var(--text-gray);font-size:13px}.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px}.stat-card{background:linear-gradient(135deg,rgba(14,165,233,.1) 0%,rgba(124,58,237,.1) 100%);border-radius:20px;padding:20px;text-align:center;position:relative;overflow:hidden}.stat-card h3{font-size:32px;font-weight:800;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:4px;position:relative;z-index:1}.stat-card p{color:var(--text-gray);font-size:13px;font-weight:600;position:relative;z-index:1}.bar-chart{display:flex;align-items:flex-end;justify-content:space-between;height:180px;margin:20px 0;gap:8px}.bar{flex:1;background:linear-gradient(180deg,#0EA5E9 0%,#7C3AED 100%);border-radius:12px 12px 0 0;min-height:20px;position:relative;transition:all .3s}.bar-label{position:absolute;bottom:-24px;left:50%;transform:translateX(-50%);font-size:11px;color:var(--text-gray);font-weight:600}.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:white;box-shadow:0 -4px 24px rgba(0,0,0,.08);display:flex;justify-content:space-around;align-items:center;padding:12px 0;height:70px;z-index:900}.nav-item{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;padding:8px 16px;border-radius:12px;transition:all .3s;background:transparent;border:none;font-family:'Poppins',sans-serif}.nav-item svg{width:24px;height:24px;transition:transform .3s}.nav-item span{font-size:12px;font-weight:600;color:var(--text-gray)}.nav-item.active{background:rgba(14,165,233,.1)}.nav-item.active svg{transform:scale(1.1)}.nav-item.active span{color:var(--primary)}.nav-item.ai-button{width:68px;height:68px;border-radius:50%;background:linear-gradient(135deg,#14B8A6 0%,#0EA5E9 100%);border:4px solid white;box-shadow:0 8px 24px rgba(20,184,166,.4);position:relative;top:-20px;padding:0}.nav-item.ai-button span{color:white;font-size:18px;font-weight:800}.workout-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:24px}.workout-type{background:white;border:2px solid #E2E8F0;border-radius:20px;padding:32px 24px;text-align:center;cursor:pointer;transition:all .3s}.workout-type.selected{background:linear-gradient(135deg,rgba(14,165,233,.1) 0%,rgba(124,58,237,.1) 100%);border-color:var(--primary)}.workout-type svg{width:52px;height:52px;margin-bottom:12px;transition:transform .3s}.workout-type.selected svg{transform:scale(1.1)}.workout-type h4{font-size:16px;font-weight:700;color:var(--text-dark)}.map-container{width:100%;height:300px;border-radius:0 0 32px 32px;overflow:hidden;margin:-24px -24px 24px -24px;position:relative;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%)}.map-container iframe{width:100%;height:100%;border:none}.workout-timer{font-size:56px;font-weight:800;text-align:center;margin:24px 0;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.workout-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:24px}.workout-stat{background:white;border-radius:20px;padding:16px;text-align:center;box-shadow:0 4px 24px rgba(0,0,0,.06)}.workout-stat h4{font-size:24px;font-weight:800;color:var(--primary);margin-bottom:4px}.workout-stat p{font-size:12px;color:var(--text-gray);font-weight:600}.workout-controls{display:flex;gap:12px}.btn-workout{flex:1;padding:18px;border-radius:16px;border:none;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;font-family:'Poppins',sans-serif}.btn-pause{background:linear-gradient(135deg,#F59E0B 0%,#F97316 100%);color:white;box-shadow:0 8px 24px rgba(245,158,11,.4)}.btn-stop{background:linear-gradient(135deg,#EF4444 0%,#DC2626 100%);color:white;box-shadow:0 8px 24px rgba(239,68,68,.4)}.btn-start{background:linear-gradient(135deg,#10B981 0%,#14B8A6 100%);color:white;box-shadow:0 8px 24px rgba(16,185,129,.4)}.btn-workout:active{transform:scale(.98)}.chat-container{height:calc(100vh - 240px);overflow-y:auto;padding:24px;margin:-24px -24px 0 -24px}.message{margin-bottom:16px;display:flex;gap:12px}.message.user{flex-direction:row-reverse}.message-bubble{max-width:75%;padding:16px 20px;border-radius:20px;line-height:1.5}.message.user .message-bubble{background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);color:white;border-radius:20px 20px 6px 20px}.message.bot .message-bubble{background:white;color:var(--text-dark);border:1px solid #E2E8F0;border-radius:20px 20px 20px 6px}.chat-input-container{position:fixed;bottom:70px;left:0;right:0;background:var(--bg-main);padding:16px 20px;border-top:1px solid #E2E8F0}.chat-input-box{display:flex;gap:12px;max-width:480px;margin:0 auto}.chat-input-box input{flex:1;padding:16px 20px;border-radius:20px;border:2px solid #E2E8F0;font-size:15px;font-family:'Poppins',sans-serif;background:white}.chat-input-box input:focus{outline:none;border-color:var(--primary)}.btn-send,.btn-voice{width:52px;height:52px;border-radius:50%;border:none;background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(14,165,233,.4);transition:all .3s}.btn-send:active,.btn-voice:active{transform:scale(.95)}.btn-voice.recording{background:linear-gradient(135deg,#EF4444 0%,#DC2626 100%);animation:pulse 1s infinite}.nutrition-header{background:linear-gradient(135deg,#14B8A6 0%,#0EA5E9 100%);color:white;border-radius:24px;padding:32px 24px;margin-bottom:24px;text-align:center}.nutrition-header h2{font-size:48px;font-weight:800;margin-bottom:8px}.nutrition-header p{opacity:.9;font-size:15px}.hydration-cards{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px}.hydration-card{border-radius:20px;padding:24px;text-align:center;cursor:pointer;transition:all .3s;color:white}.hydration-card.water{background:linear-gradient(135deg,#0EA5E9 0%,#06B6D4 100%)}.hydration-card.coffee{background:linear-gradient(135deg,#92400E 0%,#78350F 100%)}.hydration-card:active{transform:scale(.98)}.hydration-card h3{font-size:32px;font-weight:800;margin-bottom:4px}.hydration-card p{font-size:14px;opacity:.9}.food-list{margin-top:16px}.food-item{background:linear-gradient(135deg,rgba(14,165,233,.1) 0%,rgba(14,165,233,.05) 100%);border-radius:16px;padding:16px;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center}.food-item h4{font-size:15px;font-weight:700;margin-bottom:4px}.food-item p{font-size:12px;color:var(--text-gray)}.food-item span{font-size:18px;font-weight:800;color:var(--primary)}.goal-card{background:linear-gradient(135deg,#EC4899 0%,#DB2777 100%);color:white;border-radius:24px;padding:32px 24px;margin-bottom:24px}.goal-card h3{font-size:24px;font-weight:800;margin-bottom:16px}.progress-bar-container{background:rgba(255,255,255,.2);border-radius:8px;height:14px;overflow:hidden;margin-bottom:8px}.progress-bar{background:white;height:100%;border-radius:8px;transition:width .3s}.goal-card p{opacity:.9;font-size:14px}.week-tracker{display:flex;justify-content:space-between;margin-top:16px;gap:8px}.day-bar{flex:1;background:rgba(255,255,255,.2);border-radius:8px;height:80px;position:relative;overflow:hidden}.day-fill{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(180deg,white 0%,rgba(255,255,255,.8) 100%);transition:height .3s}.day-label{position:absolute;bottom:4px;left:50%;transform:translateX(-50%);font-size:10px;font-weight:700;color:var(--accent)}.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:9999;align-items:center;justify-content:center;padding:24px}.modal.active{display:flex}.modal-content{background:white;border-radius:28px;padding:32px;max-width:400px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.3)}.modal-content h3{font-size:24px;font-weight:800;margin-bottom:24px}.modal-content input{width:100%;padding:16px 20px;border-radius:16px;border:2px solid #E2E8F0;font-size:15px;font-family:'Poppins',sans-serif;margin-bottom:16px}.modal-content input:focus{outline:none;border-color:var(--primary)}.modal-buttons{display:flex;gap:12px;margin-top:24px}.btn-modal{flex:1;padding:16px;border-radius:16px;border:none;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s;font-family:'Poppins',sans-serif}.btn-cancel{background:#F1F5F9;color:var(--text-dark)}.btn-submit{background:linear-gradient(135deg,#0EA5E9 0%,#7C3AED 100%);color:white;box-shadow:0 4px 16px rgba(14,165,233,.4)}.btn-modal:active{transform:scale(.98)}.mb-16{margin-bottom:16px}.mb-24{margin-bottom:24px}
</style>
</head>
<body>
<div id="splash"><h1>HealthMind</h1><p>AI Fitness Coach</p></div>
<div class="tracking-indicator" id="trackingIndicator">üèÉ TRACKING WORKOUT...</div>
<div class="auth-screen active" id="loginScreen"><div class="auth-card"><h2>Welcome Back!</h2><p>Sign in to continue your fitness journey</p><div class="input-group"><label>Email</label><input type="email" id="loginEmail" placeholder="your@email.com"></div><div class="input-group"><label>Password</label><input type="password" id="loginPassword" placeholder="Enter your password"></div><button class="btn-primary" onclick="login()">Sign In</button><div class="auth-link">Don't have an account? <a onclick="showSignup()">Sign Up</a></div></div></div>
<div class="auth-screen" id="signupScreen"><div class="auth-card"><h2>Get Started</h2><p>Create your account to begin</p><div class="input-group"><label>Full Name</label><input type="text" id="signupName" placeholder="John Doe"></div><div class="input-group"><label>Email</label><input type="email" id="signupEmail" placeholder="your@email.com"></div><div class="input-group"><label>Password</label><input type="password" id="signupPassword" placeholder="Create a password"></div><button class="btn-primary" onclick="signup()">Create Account</button><div class="auth-link">Already have an account? <a onclick="showLogin()">Sign In</a></div></div></div>
<div class="screen" id="dashboardScreen"><div class="container"><div class="welcome-card"><h2 id="welcomeName">Welcome!</h2><p>Let's make today count</p></div><div class="progress-rings"><div class="progress-ring"><svg><defs><linearGradient id="stepsGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#0EA5E9"/><stop offset="100%" style="stop-color:#7C3AED"/></linearGradient></defs><circle class="bg" cx="60" cy="60" r="50"/><circle id="stepsCircle" cx="60" cy="60" r="50" stroke="url(#stepsGradient)" stroke-dasharray="314" stroke-dashoffset="314"/></svg><h4 id="stepsCount">0</h4><p>of 10,000 steps</p></div><div class="progress-ring"><svg><defs><linearGradient id="caloriesGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#F43F5E"/><stop offset="100%" style="stop-color:#DC2626"/></linearGradient></defs><circle class="bg" cx="60" cy="60" r="50"/><circle id="caloriesCircle" cx="60" cy="60" r="50" stroke="url(#caloriesGradient)" stroke-dasharray="314" stroke-dashoffset="314"/></svg><h4 id="caloriesCount">0</h4><p>of 500 calories</p></div></div><div class="stats-grid"><div class="stat-card"><h3 id="milesCount">0.0</h3><p>Miles Today</p></div><div class="stat-card"><h3 id="workoutCount">0</h3><p>Total Workouts</p></div></div><div class="card"><h3 class="mb-16">Weekly Activity</h3><div class="bar-chart" id="weeklyChart"></div></div><div class="card"><h3 class="mb-16">Nutrition Summary</h3><p style="font-size:32px;font-weight:800;color:var(--tertiary);text-align:center" id="caloriesRemaining">0</p><p style="text-align:center;color:var(--text-gray);margin-bottom:16px">Calories Remaining</p><p style="font-size:13px;color:var(--text-gray)">Goal: <span id="goalCals">2000</span> - Eaten: <span id="eatenCals">0</span> + Burned: <span id="burnedCals">0</span></p></div><div class="card" id="activeGoalsCard" style="display:none"><h3 class="mb-16">Active Goals</h3><div id="activeGoalsList"></div></div></div></div>
<div class="screen" id="workoutSelectScreen"><div class="container"><h2 style="font-size:28px;font-weight:800;margin-bottom:8px">Start a Workout</h2><p style="color:var(--text-gray);margin-bottom:24px">Choose your activity type</p><div class="workout-grid"><div class="workout-type selected" onclick="selectWorkout('Walking')"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 17l-4 4m0 0l-4-4m4 4V3"></path></svg><h4>Walking</h4></div><div class="workout-type" onclick="selectWorkout('Running')"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><h4>Running</h4></div><div class="workout-type" onclick="selectWorkout('Cycling')"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h4>Cycling</h4></div><div class="workout-type" onclick="selectWorkout('Hiking')"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 11l7-7 7 7M5 19l7-7 7 7"></path></svg><h4>Hiking</h4></div></div><button class="btn-primary" style="margin-top:24px" onclick="startWorkout()">Start Tracking</button></div></div>
<div class="screen" id="workoutScreen"><div class="container" style="padding-top:0"><div class="map-container"><iframe id="mapFrame" src="" allowfullscreen></iframe></div><h2 style="font-size:24px;font-weight:800;margin-bottom:16px" id="workoutType">Walking</h2><div class="workout-timer" id="workoutTimer">00:00:00</div><div class="workout-stats"><div class="workout-stat"><h4 id="workoutDistance">0.0</h4><p>KM</p></div><div class="workout-stat"><h4 id="workoutSteps">0</h4><p>STEPS</p></div><div class="workout-stat"><h4 id="workoutCalories">0</h4><p>CALS</p></div></div><div class="workout-controls"><button class="btn-workout btn-pause" id="pauseBtn" onclick="togglePause()">Pause</button><button class="btn-workout btn-stop" onclick="stopWorkout()">Stop</button></div></div></div>
<div class="screen" id="chatScreen"><div class="chat-container" id="chatMessages"></div><div class="chat-input-container"><div class="chat-input-box"><input type="text" id="chatInput" placeholder="Ask me anything about fitness..." onkeypress="if(event.key==='Enter') sendMessage()"><button class="btn-voice" id="voiceBtn" onclick="toggleVoice()"><svg width="24" height="24" fill="white" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg></button><button class="btn-send" onclick="sendMessage()"><svg width="24" height="24" fill="white" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button></div></div></div>
<div class="screen" id="nutritionScreen"><div class="container"><div class="nutrition-header"><h2 id="nutritionCalories">0</h2><p>Calories Remaining Today</p></div><div class="hydration-cards"><div class="hydration-card water" onclick="showHydrationModal('water')"><h3 id="waterCount">0</h3><p>oz Water</p></div><div class="hydration-card coffee" onclick="showHydrationModal('coffee')"><h3 id="coffeeCount">0</h3><p>oz Coffee</p></div></div><div class="card"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px"><h3>Today's Meals</h3><button class="btn-primary" style="width:auto;padding:12px 24px;font-size:14px" onclick="showFoodModal()">+ Add Food</button></div><div class="food-list" id="foodList"></div></div><div class="card"><h3 class="mb-16">Daily Calories (7 Days)</h3><div class="bar-chart" id="caloriesChart"></div></div><div class="card"><h3 class="mb-16">Hydration Timeline (Today)</h3><canvas id="hydrationChart" width="400" height="200"></canvas></div></div></div>
<div class="screen" id="goalsScreen"><div class="container"><h2 style="font-size:28px;font-weight:800;margin-bottom:8px">Your Goals</h2><p style="color:var(--text-gray);margin-bottom:24px">Track your progress and stay motivated</p><div id="goalsList"></div><button class="btn-primary" onclick="showGoalModal()">+ Create New Goal</button></div></div>
<div class="bottom-nav"><button class="nav-item active" onclick="navigate('dashboard')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg><span>Dashboard</span></button><button class="nav-item" onclick="navigate('workout')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/></svg><span>Workout</span></button><button class="nav-item ai-button" onclick="navigate('chat')"><span>AI</span></button><button class="nav-item" onclick="navigate('nutrition')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/></svg><span>Nutrition</span></button><button class="nav-item" onclick="navigate('goals')"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg><span>Goals</span></button></div>
<div class="modal" id="foodModal"><div class="modal-content"><h3>Add Food</h3><input type="text" id="foodName" placeholder="Food name"><input type="number" id="foodCalories" placeholder="Calories"><div class="modal-buttons"><button class="btn-modal btn-cancel" onclick="closeFoodModal()">Cancel</button><button class="btn-modal btn-submit" onclick="addFood()">Add</button></div></div></div>
<div class="modal" id="hydrationModal"><div class="modal-content"><h3 id="hydrationModalTitle">Add Water</h3><input type="number" id="hydrationOz" placeholder="Ounces (oz)"><div class="modal-buttons"><button class="btn-modal btn-cancel" onclick="closeHydrationModal()">Cancel</button><button class="btn-modal btn-submit" onclick="addHydration()">Add</button></div></div></div>
<div class="modal" id="goalModal"><div class="modal-content"><h3>Create Weight Loss Goal</h3><input type="number" id="currentWeight" placeholder="Current weight (lbs)"><input type="number" id="targetWeight" placeholder="Target weight (lbs)"><input type="number" id="goalDays" placeholder="Days to achieve"><div class="modal-buttons"><button class="btn-modal btn-cancel" onclick="closeGoalModal()">Cancel</button><button class="btn-modal btn-submit" onclick="createGoal()">Create</button></div></div></div>
<script>
let STATE={user:null,workouts:[],foods:[],goals:[],hydration:[],selectedWorkoutType:'Walking'};let currentHydration='water',workoutTimer=null,workoutSeconds=0,workoutPaused=false,workoutData={distance:0,steps:0,calories:0,positions:[]},lastPosition=null,mapUpdateInterval=null,recognition=null,isRecording=false;const AI_RESPONSES={"lose weight":"To lose weight sustainably, aim for a 500-calorie daily deficit through diet and exercise. Focus on whole foods, stay hydrated, and be patient‚Äî1-2 lbs per week is healthy progress!","build muscle":"Building muscle requires progressive overload and protein! Aim for 0.8-1g protein per lb bodyweight, lift heavy 3-4x/week, and prioritize compound movements like squats and deadlifts.","protein":"Great question! Most people need 0.8-1g of protein per pound of bodyweight. Good sources include chicken, fish, eggs, Greek yogurt, and legumes. Spread intake throughout the day for best results.","water":"Hydration is crucial! Aim for 8-10 glasses (64-80oz) daily, more if you're active. Proper hydration boosts energy, aids recovery, and supports fat loss. Track it in the Nutrition tab!","workout":"Consistency beats intensity! Start with 3-4 workouts per week mixing cardio and strength training. Listen to your body, progress gradually, and remember‚Äîrest days are when you grow stronger.","cardio":"Cardio is excellent for heart health and calorie burning! Mix steady-state (30-45 min) with HIIT (20 min) 3-4x weekly. Walking, running, cycling‚Äîpick what you enjoy and you'll stick with it!","rest":"Rest days are essential‚Äîthey're when your muscles repair and grow! Take 1-2 full rest days weekly, or do active recovery like yoga or walking. Sleep 7-9 hours for optimal recovery.","motivated":"Motivation fluctuates‚Äîbuild discipline instead! Set small daily goals, track progress visibly, find an accountability partner, and celebrate wins. Remember why you started on tough days!","diet":"Focus on whole foods: lean proteins, complex carbs, healthy fats, and lots of veggies. An 80/20 approach works‚Äîeat nutrient-dense 80% of the time, enjoy treats 20%. Sustainability is key!","sleep":"Sleep is your secret weapon! Aim for 7-9 hours. It regulates hunger hormones, aids muscle recovery, and improves workout performance. Create a routine: dark room, cool temp, no screens 1hr before bed.","beginner":"Welcome! Start simple: 30-min walks daily, basic bodyweight exercises (squats, push-ups), and focus on forming the habit. Progress gradually, be patient with yourself, and enjoy the journey!","abs":"Abs are made in the kitchen! Core exercises help, but visible abs require low body fat (10-15% men, 18-22% women). Do planks, dead bugs, and anti-rotation work 2-3x weekly.","stretch":"Stretching improves flexibility and prevents injury! Do dynamic stretches before workouts (leg swings, arm circles) and static stretches after (hold 30 sec). Yoga is excellent too!","strength":"Strength training is vital at any age! It builds muscle, strengthens bones, boosts metabolism, and improves quality of life. Start with 2-3 sessions weekly using compound movements.","running":"Running burns calories and builds endurance! Start with run-walk intervals, increase gradually (10% weekly max), invest in proper shoes, and always warm up. Track your progress here!","cycling":"Cycling is low-impact and great for cardio! It's joint-friendly, burns serious calories, and builds leg strength. Mix steady rides with interval training for best results.","walking":"Walking is underrated! It's low-impact, reduces stress, aids digestion, and adds up‚Äî10,000 steps = ~5 miles and 400+ calories. Make it enjoyable with music or podcasts!","hiking":"Hiking combines cardio with nature therapy! It burns more calories than flat walking (thanks to elevation), builds leg strength, and boosts mental health. Start easy and progress gradually.","calories":"Calories matter for weight goals! For fat loss, aim for a 300-500 deficit. For muscle gain, a 200-300 surplus. Use the app to track intake and burned calories accurately.","carbs":"Carbs aren't the enemy! They fuel workouts and brain function. Choose complex carbs (oats, rice, potatoes) over refined. Timing matters‚Äîhave them around workouts for energy!","fat":"Healthy fats are essential! They support hormones, vitamin absorption, and satiety. Include avocados, nuts, olive oil, and fatty fish. Aim for 20-35% of total calories from fat.","meal prep":"Meal prep saves time and keeps you on track! Dedicate Sunday to cook proteins, chop veggies, and portion meals. Store in glass containers. You'll thank yourself all week!","supplements":"Supplements supplement‚Äîthey don't replace real food! Protein powder, creatine, and vitamin D are beneficial for most. Everything else depends on individual needs. Food first, always!","creatine":"Creatine is one of the most researched supplements! It improves strength, power, and muscle growth. Take 5g daily, any time. It's safe, effective, and works for most people.","injury":"Sorry to hear that! Rest is crucial‚Äîdon't push through pain. Ice for swelling, gentle movement when able, and see a professional if it persists. Prevention beats recovery!","sore":"Muscle soreness (DOMS) is normal 24-48hrs after workouts! It means you challenged yourself. Active recovery (walking, light cardio), stretching, and protein help. It decreases as you adapt.","plateau":"Plateaus happen to everyone! Mix things up: change exercises, increase intensity, adjust calories, or take a deload week. Progress isn't always linear‚Äîtrust the process!","recovery":"Recovery is where gains happen! Prioritize sleep, nutrition, and active recovery. Consider massage, foam rolling, or stretching. Listen to your body‚Äîsometimes rest is the best workout.","consistency":"Consistency is everything! Small daily actions compound into massive results. Show up even when motivation is low. Build systems, not reliance on willpower. You've got this!","motivation":"Motivation comes and goes‚Äîdiscipline stays! Create habits, set systems, track progress, and remember your 'why'. Visual progress (photos, measurements) helps when motivation dips.","stress":"Exercise is an excellent stress reliever! It releases endorphins, improves sleep, and provides mental clarity. Try yoga, walking in nature, or any movement you enjoy. Self-care isn't selfish!","gym":"Gym intimidation is real but temporary! Everyone started somewhere. Focus on your workout, use lighter weights to learn form, and remember‚Äîpeople are focused on themselves, not judging you!","home":"Home workouts are effective! You need minimal equipment‚Äîbodyweight exercises, resistance bands, and dumbbells work great. YouTube has tons of free routines. Consistency matters more than location!","equipment":"Start simple! For home: resistance bands ($15), adjustable dumbbells ($50), and a mat ($20) cover most bases. At gym: barbells, dumbbells, cable machines are most versatile.","track":"Tracking keeps you accountable! This app tracks workouts, nutrition, and goals. Also consider: progress photos (monthly), measurements (weekly), and how clothes fit. Data motivates!","progress":"Celebrate all progress! Scale weight fluctuates, so track: strength gains, endurance improvements, how clothes fit, energy levels, and consistency. Non-scale victories matter just as much!","age":"You can get fit at any age! Adjust intensity to your level, prioritize form, allow more recovery time, and focus on consistency. Strength training is especially important as we age!","woman":"Women benefit hugely from strength training! You won't get bulky (it's very hard to), but you'll get stronger, leaner, and healthier. Lift heavy, don't fear weights, and fuel properly!","form":"Form over ego, always! Bad form causes injury and limits progress. Start light, film yourself, or work with a trainer. Control the weight, full range of motion, no bouncing!","nutrition":"Nutrition is 70% of results! Focus on whole foods, adequate protein, lots of veggies, and staying hydrated. Small sustainable changes beat extreme diets every time.","hydration":"Hydration affects everything: energy, performance, recovery, and fat loss! Drink water throughout the day, more before/during/after workouts. Urine should be pale yellow.","flexibility":"Flexibility prevents injury and improves performance! Stretch after workouts when muscles are warm. Yoga 1-2x weekly helps. Don't bounce‚Äîhold stretches 30+ seconds.","core":"Core strength supports everything! It's more than abs‚Äîit includes back and obliques. Planks, dead bugs, pallof presses, and bird dogs are excellent. Train core 2-3x weekly.","hiit":"HIIT is time-efficient and effective! It burns calories, boosts metabolism, and improves cardiovascular fitness. Do 20-30 min sessions 2-3x weekly. Don't overdo it‚Äîrecovery matters!","morning":"Morning workouts are great for consistency! They boost energy all day and ensure it gets done. Eat a light snack 30min before or train fasted if it feels okay.","evening":"Evening workouts work too! Use them to destress after work. Just finish 2-3hrs before bed so you can wind down. What matters is consistency, not timing!","food":"Think of food as fuel! Choose nutrient-dense options that support your goals. Enjoy treats in moderation. No foods are forbidden‚Äîit's about balance and overall patterns.","weight loss":"Sustainable weight loss = calorie deficit + patience! Aim for 1-2 lbs weekly through diet and exercise. Track intake, stay active, prioritize protein and sleep. Consistency wins!","muscle":"Building muscle takes time and dedication! Progressive overload (gradually increasing weight), adequate protein (0.8-1g per lb), and rest are key. Trust the process!","exercise":"Any movement is good movement! Find exercises you enjoy so you'll stick with it. Mix cardio and strength training for overall fitness. Start where you are, progress gradually!","how":"Great question! For anything fitness-related, start simple, learn proper form, be consistent, and progress gradually. This app tracks everything to help you succeed!","when":"The best time to workout is whenever you'll actually do it! Morning, lunch, or evening‚Äîconsistency matters more than timing. Choose what fits your schedule and energy levels.","start":"Starting is the hardest part‚Äîcongrats! Begin with small achievable goals, track your progress, be patient with yourself, and celebrate small wins. You're on the right path!"};const AI_FALLBACKS=["That's a great question! While I'm not sure about that specifically, I can help with workout tracking, nutrition planning, and fitness goals. What would you like to know?","I'm here to help with your fitness journey! Ask me about weight loss, muscle building, nutrition, workout tips, or how to use this app effectively.","Interesting! For specific medical or highly technical questions, consult a professional. But I can definitely help with general fitness, nutrition, and motivation! What's on your mind?","I'm your AI fitness coach focused on workouts, nutrition, and healthy habits! Try asking about exercise routines, meal planning, or staying motivated.","Great to chat! I specialize in fitness guidance, workout tracking, and nutrition tips. What aspect of your health journey can I help with today?"];function init(){loadState();STATE.user&&showDashboard();setTimeout(()=>{document.getElementById('splash').style.display='none'},2500);checkChromeAI();setupSpeechRecognition();'serviceWorker'in navigator&&navigator.serviceWorker.register('sw.js').catch(e=>console.log('SW registration failed'))}async function checkChromeAI(){try{window.ai&&window.ai.languageModel&&console.log('Chrome AI available')}catch(e){console.log('Chrome AI not available, using keyword matching')}}function setupSpeechRecognition(){'webkitSpeechRecognition'in window&&(recognition=new webkitSpeechRecognition,recognition.continuous=!1,recognition.interimResults=!1,recognition.onresult=event=>{const transcript=event.results[0][0].transcript;document.getElementById('chatInput').value=transcript;sendMessage()},recognition.onend=()=>{isRecording=!1;updateVoiceButton()})}function showSignup(){document.getElementById('loginScreen').classList.remove('active');document.getElementById('signupScreen').classList.add('active')}function showLogin(){document.getElementById('signupScreen').classList.remove('active');document.getElementById('loginScreen').classList.add('active')}function signup(){const name=document.getElementById('signupName').value.trim(),email=document.getElementById('signupEmail').value.trim(),password=document.getElementById('signupPassword').value;if(!name||!email||!password)return void alert('Please fill in all fields');const userData={name:name,email:email,password:password};localStorage.setItem('u_'+email,JSON.stringify(userData));STATE.user={name:name,email:email};saveState();showDashboard()}function login(){const email=document.getElementById('loginEmail').value.trim(),password=document.getElementById('loginPassword').value;if(!email||!password)return void alert('Please fill in all fields');const stored=localStorage.getItem('u_'+email);if(!stored)return void alert('Account not found. Please sign up.');const userData=JSON.parse(stored);if(userData.password!==password)return void alert('Incorrect password');STATE.user={name:userData.name,email:userData.email};saveState();showDashboard()}function showDashboard(){document.getElementById('loginScreen').classList.remove('active');document.getElementById('signupScreen').classList.remove('active');navigate('dashboard');updateDashboard()}function navigate(screen){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));let screenId;switch(screen){case'dashboard':screenId='dashboardScreen';updateDashboard();break;case'workout':screenId='workoutSelectScreen';break;case'chat':screenId='chatScreen';0===document.getElementById('chatMessages').children.length&&addBotMessage("Hi! I'm your AI health coach. Ask me anything about fitness, nutrition, or weight loss!");break;case'nutrition':screenId='nutritionScreen';updateNutrition();break;case'goals':screenId='goalsScreen';updateGoals()}document.getElementById(screenId).classList.add('active');const navItems=document.querySelectorAll('.nav-item'),index=['dashboard','workout','chat','nutrition','goals'].indexOf(screen);-1!==index&&navItems[index].classList.add('active')}function updateDashboard(){if(!STATE.user)return;const firstName=STATE.user.name.split(' ')[0];document.getElementById('welcomeName').textContent=`Welcome, ${firstName}!`;const totalSteps=STATE.workouts.reduce((sum,w)=>sum+w.steps,0),totalCalories=STATE.workouts.reduce((sum,w)=>sum+w.calories,0),totalMiles=.621371*STATE.workouts.reduce((sum,w)=>sum+w.distance,0),workoutCount=STATE.workouts.length;document.getElementById('stepsCount').textContent=totalSteps.toLocaleString();const stepsProgress=Math.min(totalSteps/10000*314,314);document.getElementById('stepsCircle').style.strokeDashoffset=314-stepsProgress;document.getElementById('caloriesCount').textContent=totalCalories;const caloriesProgress=Math.min(totalCalories/500*314,314);document.getElementById('caloriesCircle').style.strokeDashoffset=314-caloriesProgress;document.getElementById('milesCount').textContent=totalMiles.toFixed(1);document.getElementById('workoutCount').textContent=workoutCount;renderWeeklyChart();const goal=STATE.goals.length>0?STATE.goals[0].dailyCalDeficit||2000:2000,eaten=STATE.foods.reduce((sum,f)=>sum+f.calories,0),burned=totalCalories,remaining=goal-eaten+burned;document.getElementById('caloriesRemaining').textContent=remaining;document.getElementById('goalCals').textContent=goal;document.getElementById('eatenCals').textContent=eaten;document.getElementById('burnedCals').textContent=burned;if(STATE.goals.length>0){document.getElementById('activeGoalsCard').style.display='block';let html='';STATE.goals.forEach(goal=>{const daysElapsed=Math.floor((Date.now()-goal.created)/864e5),daysLeft=Math.max(0,goal.days-daysElapsed),progress=Math.min(daysElapsed/goal.days*100,100);html+=`<div style="background:linear-gradient(135deg,rgba(236,72,153,.1) 0%,rgba(219,39,119,.1) 100%);padding:16px;border-radius:16px;margin-bottom:12px"><h4 style="font-size:15px;font-weight:700;margin-bottom:8px;color:var(--accent)">${goal.title}</h4><div style="background:rgba(236,72,153,.2);height:8px;border-radius:4px;overflow:hidden"><div style="background:var(--accent);height:100%;width:${progress}%"></div></div><p style="font-size:12px;color:var(--text-gray);margin-top:8px">${daysLeft} days left of ${goal.days}</p></div>`});document.getElementById('activeGoalsList').innerHTML=html}}function renderWeeklyChart(){const days=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],data=[45,60,30,80,55,70,65];let html='';data.forEach((value,i)=>{const height=value/100*180;html+=`<div class="bar" style="height:${height}px"><div class="bar-label">${days[i]}</div></div>`});document.getElementById('weeklyChart').innerHTML=html}function selectWorkout(type){STATE.selectedWorkoutType=type;document.querySelectorAll('.workout-type').forEach(w=>w.classList.remove('selected'));event.target.closest('.workout-type').classList.add('selected')}function startWorkout(){if(!STATE.selectedWorkoutType)return void alert('Please select a workout type');document.getElementById('workoutSelectScreen').classList.remove('active');document.getElementById('workoutScreen').classList.add('active');document.getElementById('workoutType').textContent=STATE.selectedWorkoutType;workoutSeconds=0;workoutPaused=!1;workoutData={distance:0,steps:0,calories:0,positions:[]};lastPosition=null;startGPS();startTimer();document.getElementById('trackingIndicator').classList.add('active')}function startGPS(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(position=>{const lat=position.coords.latitude,lon=position.coords.longitude;lastPosition={lat:lat,lon:lon};updateMap(lat,lon);mapUpdateInterval=setInterval(trackPosition,2000)},error=>{console.error('GPS error:',error);updateMap(37.7749,-122.4194)})}function updateMap(lat,lon){document.getElementById('mapFrame').src=`https://www.openstreetmap.org/export/embed.html?bbox=${lon-.01},${lat-.01},${lon+.01},${lat+.01}&layer=mapnik&marker=${lat},${lon}`}function trackPosition(){workoutPaused||navigator.geolocation.getCurrentPosition(position=>{const lat=position.coords.latitude,lon=position.coords.longitude;if(lastPosition){const distance=calculateDistance(lastPosition.lat,lastPosition.lon,lat,lon);workoutData.distance+=distance;const activityRates={Walking:{stepsPerKm:1315,calsPerKm:65},Running:{stepsPerKm:1570,calsPerKm:100},Cycling:{stepsPerKm:0,calsPerKm:50},Hiking:{stepsPerKm:1400,calsPerKm:80}},rates=activityRates[STATE.selectedWorkoutType];workoutData.steps+=Math.round(distance*rates.stepsPerKm);workoutData.calories+=Math.round(distance*rates.calsPerKm)}lastPosition={lat:lat,lon:lon};workoutData.positions.push({lat:lat,lon:lon,time:Date.now()});updateMap(lat,lon);updateWorkoutDisplay()})}function calculateDistance(lat1,lon1,lat2,lon2){const R=6371,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function startTimer(){workoutTimer=setInterval(()=>{workoutPaused||(workoutSeconds++,updateTimerDisplay())},1000)}function updateTimerDisplay(){const hours=Math.floor(workoutSeconds/3600),minutes=Math.floor(workoutSeconds%3600/60),seconds=workoutSeconds%60,display=`${String(hours).padStart(2,'0')}:${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;document.getElementById('workoutTimer').textContent=display}function updateWorkoutDisplay(){document.getElementById('workoutDistance').textContent=workoutData.distance.toFixed(1);document.getElementById('workoutSteps').textContent=workoutData.steps.toLocaleString();document.getElementById('workoutCalories').textContent=workoutData.calories}function togglePause(){workoutPaused=!workoutPaused;const btn=document.getElementById('pauseBtn');workoutPaused?(btn.textContent='Resume',btn.classList.remove('btn-pause'),btn.classList.add('btn-start')):(btn.textContent='Pause',btn.classList.remove('btn-start'),btn.classList.add('btn-pause'))}function stopWorkout(){confirm('Are you sure you want to stop this workout?')&&(clearInterval(workoutTimer),clearInterval(mapUpdateInterval),STATE.workouts.push({type:STATE.selectedWorkoutType,date:Date.now(),distance:workoutData.distance,steps:workoutData.steps,calories:workoutData.calories,duration:workoutSeconds}),saveState(),document.getElementById('trackingIndicator').classList.remove('active'),navigate('dashboard'))}async function sendMessage(){const input=document.getElementById('chatInput'),message=input.value.trim();if(!message)return;addUserMessage(message);input.value='';let response=await getChromeAIResponse(message);response||(response=getKeywordResponse(message));addBotMessage(response);'speechSynthesis'in window&&speechSynthesis.speak(new SpeechSynthesisUtterance(response))}async function getChromeAIResponse(message){try{if(window.ai&&window.ai.languageModel){const session=await window.ai.languageModel.create({systemPrompt:"You are a helpful fitness and nutrition coach. Provide concise, practical advice in 2-3 sentences. Focus on health, exercise, nutrition, and motivation."}),response=await session.prompt(message);session.destroy();return response}}catch(e){console.log('Chrome AI failed, using keyword matching')}return null}function getKeywordResponse(message){const lower=message.toLowerCase();for(const[keyword,response]of Object.entries(AI_RESPONSES))if(lower.includes(keyword))return response;return AI_FALLBACKS[Math.floor(Math.random()*AI_FALLBACKS.length)]}function addUserMessage(text){const container=document.getElementById('chatMessages'),div=document.createElement('div');div.className='message user';div.innerHTML=`<div class="message-bubble">${text}</div>`;container.appendChild(div);container.scrollTop=container.scrollHeight}function addBotMessage(text){const container=document.getElementById('chatMessages'),div=document.createElement('div');div.className='message bot';div.innerHTML=`<div class="message-bubble">${text}</div>`;container.appendChild(div);container.scrollTop=container.scrollHeight}function toggleVoice(){if(!recognition)return void alert('Voice input not supported in your browser');isRecording?(recognition.stop(),isRecording=!1):(recognition.start(),isRecording=!0);updateVoiceButton()}function updateVoiceButton(){const btn=document.getElementById('voiceBtn');isRecording?(btn.classList.add('recording'),btn.innerHTML='<svg width="24" height="24" fill="white" viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="12"/></svg>'):(btn.classList.remove('recording'),btn.innerHTML='<svg width="24" height="24" fill="white" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>')}function updateNutrition(){const goal=STATE.goals.length>0?STATE.goals[0].dailyCalDeficit||2000:2000,eaten=STATE.foods.reduce((sum,f)=>sum+f.calories,0),burned=STATE.workouts.reduce((sum,w)=>sum+w.calories,0),remaining=goal-eaten+burned;document.getElementById('nutritionCalories').textContent=remaining;const waterToday=STATE.hydration.filter(h=>'water'===h.type&&isToday(h.time)).reduce((sum,h)=>sum+h.oz,0),coffeeToday=STATE.hydration.filter(h=>'coffee'===h.type&&isToday(h.time)).reduce((sum,h)=>sum+h.oz,0);document.getElementById('waterCount').textContent=waterToday;document.getElementById('coffeeCount').textContent=coffeeToday;renderFoodList();renderCaloriesChart();renderHydrationChart()}function isToday(timestamp){return new Date().setHours(0,0,0,0)===new Date(timestamp).setHours(0,0,0,0)}function renderFoodList(){const todayFoods=STATE.foods.filter(f=>isToday(f.time));let html='';0===todayFoods.length?html='<p style="text-align:center;color:var(--text-gray)">No meals logged today</p>':todayFoods.forEach(food=>{const time=new Date(food.time).toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'});html+=`<div class="food-item"><div><h4>${food.name}</h4><p>${time}</p></div><span>${food.calories} cal</span></div>`});document.getElementById('foodList').innerHTML=html}function renderCaloriesChart(){const days=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],data=[1800,2100,1950,2200,1850,2050,1900];let html='';data.forEach((value,i)=>{const height=value/2500*180;html+=`<div class="bar" style="height:${height}px;background:linear-gradient(180deg,#14B8A6 0%,#0EA5E9 100%)"><div class="bar-label">${days[i]}</div></div>`});document.getElementById('caloriesChart').innerHTML=html}function renderHydrationChart(){const canvas=document.getElementById('hydrationChart'),ctx=canvas.getContext('2d');ctx.clearRect(0,0,canvas.width,canvas.height);const waterData=[0,0,0,0,0,0,8,16,8,0,12,8,16,0,8,12,8,16,0,0,0,0,0,0],coffeeData=[0,0,0,0,0,0,0,12,8,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0],width=canvas.width,height=canvas.height,maxOz=Math.max(...waterData,...coffeeData,20);ctx.strokeStyle='#0EA5E9';ctx.lineWidth=3;ctx.beginPath();waterData.forEach((oz,i)=>{const x=i/23*(width-40)+20,y=height-30-oz/maxOz*(height-50);0===i?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.stroke();ctx.strokeStyle='#92400E';ctx.lineWidth=3;ctx.beginPath();coffeeData.forEach((oz,i)=>{const x=i/23*(width-40)+20,y=height-30-oz/maxOz*(height-50);0===i?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.stroke();ctx.strokeStyle='#E2E8F0';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(20,height-30);ctx.lineTo(width-20,height-30);ctx.stroke();ctx.fillStyle='#64748B';ctx.font='12px Poppins';ctx.fillText('6AM',80,height-10);ctx.fillText('12PM',width/2-20,height-10);ctx.fillText('6PM',width-80,height-10)}function showFoodModal(){document.getElementById('foodModal').classList.add('active')}function closeFoodModal(){document.getElementById('foodModal').classList.remove('active');document.getElementById('foodName').value='';document.getElementById('foodCalories').value=''}function addFood(){const name=document.getElementById('foodName').value.trim(),calories=parseInt(document.getElementById('foodCalories').value);if(!name||!calories)return void alert('Please fill in all fields');STATE.foods.push({name:name,calories:calories,time:Date.now()});saveState();closeFoodModal();updateNutrition()}function showHydrationModal(type){currentHydration=type;document.getElementById('hydrationModalTitle').textContent='water'===type?'Add Water':'Add Coffee';document.getElementById('hydrationModal').classList.add('active')}function closeHydrationModal(){document.getElementById('hydrationModal').classList.remove('active');document.getElementById('hydrationOz').value=''}function addHydration(){const oz=parseInt(document.getElementById('hydrationOz').value);if(!oz)return void alert('Please enter ounces');const now=new Date;STATE.hydration.push({type:currentHydration,oz:oz,time:Date.now(),hour:now.getHours()});saveState();closeHydrationModal();updateNutrition()}function updateGoals(){let html='';if(0===STATE.goals.length)html='<p style="text-align:center;color:var(--text-gray);margin:40px 0">No active goals. Create one to get started!</p>';else{STATE.goals.forEach((goal,index)=>{const daysElapsed=Math.floor((Date.now()-goal.created)/864e5),daysLeft=Math.max(0,goal.days-daysElapsed),progress=Math.min(daysElapsed/goal.days*100,100),weightLoss=goal.current-goal.target,motivations=["You're doing amazing! Keep it up! üí™","Every day is progress. Stay strong! üî•","Consistency is key. You've got this! ‚≠ê","Believe in yourself. Results are coming! üéØ","Small steps lead to big changes! üöÄ"],motivation=motivations[Math.floor(Math.random()*motivations.length)];html+=`<div class="goal-card"><h3>${goal.title}</h3><p style="font-size:16px;margin-bottom:16px">${motivation}</p><div class="goal-progress"><div class="progress-bar-container"><div class="progress-bar" style="width:${progress}%"></div></div><p>${daysLeft} days left of ${goal.days} total (${progress.toFixed(0)}% complete)</p></div><p style="font-size:18px;font-weight:700;margin:16px 0">Lose ${weightLoss} lbs: ${goal.current} ‚Üí ${goal.target} lbs</p><p style="font-size:14px">Daily calorie target: ${goal.dailyCalDeficit} calories</p><div class="week-tracker">${renderWeekTracker()}</div></div>`})}document.getElementById('goalsList').innerHTML=html}function renderWeekTracker(){const days=['M','T','W','T','F','S','S'],progress=[80,95,70,100,85,60,90];let html='';return days.forEach((day,i)=>{html+=`<div class="day-bar"><div class="day-fill" style="height:${progress[i]}%"></div><div class="day-label">${day}</div></div>`}),html}function showGoalModal(){document.getElementById('goalModal').classList.add('active')}function closeGoalModal(){document.getElementById('goalModal').classList.remove('active');document.getElementById('currentWeight').value='';document.getElementById('targetWeight').value='';document.getElementById('goalDays').value=''}function createGoal(){const current=parseFloat(document.getElementById('currentWeight').value),target=parseFloat(document.getElementById('targetWeight').value),days=parseInt(document.getElementById('goalDays').value);if(!current||!target||!days)return void alert('Please fill in all fields');if(target>=current)return void alert('Target weight must be less than current weight');const weightLoss=current-target,lbsPerWeek=weightLoss/days*7,dailyCalDeficit=Math.round(3500*lbsPerWeek/7);STATE.goals.push({title:`Lose ${weightLoss.toFixed(1)} lbs`,current:current,target:target,days:days,dailyCalDeficit:dailyCalDeficit,created:Date.now()});saveState();closeGoalModal();updateGoals()}function saveState(){localStorage.setItem('hm_data',JSON.stringify(STATE))}function loadState(){const saved=localStorage.getItem('hm_data');saved&&(STATE=JSON.parse(saved))}window.onload=init;
</script>
</body>
</html>
